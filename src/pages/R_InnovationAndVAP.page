<!------------------------------------------------------------------------------
Name        : InnovationAndVAP.page

Updated By  : Basant Verma (Appirio Offshore)
Date 				: 6/14/13
Story/Task	: US503/TA1011
------------------------------------------------------------------------------->
<apex:page showheader="false" standardStylesheets="false" sidebar="false" title="Diageo" controller="Controller_InnovationAndVAP">
<body class="isv-landing-page-r isv-page">    
         
<div class="wrapper">

    <div class="container">

        <!-- PAGE HEADER -->
        <c:R_PageHeader showThemeSelector="true" isLoggedIn="{!isLoggedIn}" basketItemsNumber="{!basketItemsNo}" />
        
        <script type="text/javascript">
            pageViewed('Innovation, Sustainovation and VAP');
            
			jQuery(document).ready(function() { 
								
			    if(jQuery(".isv-landing-page-r").length > 0) { 
			  
			        jQuery("h2").jqTransform(); 
			        jQuery(".doc-list .list-view .doc").jqTransform(); 
			        jQuery(".filter").jqTransform(); 
			  
			  
			        jQuery(".include-select div").click(function() { 
			            var div = jQuery(this); 
			            var w = div.parent(); 
			            jQuery("ul", w).slideToggle(); 
			        }); 
			        jQuery(".include-select ul a input").click(function() { 
			            jQuery(this).parent().trigger("click"); 
			        }); 
			        jQuery(".include-select ul a").click(function() { 
			            var a = jQuery(this); 
			            var check = jQuery("input", a); 
			            var ul = a.closest("ul"); 
			            ul.slideUp(); 
			            if(check.prop("disabled")) return false; 
			            var to = false; 
			            if(check.prop("checked")) to = true; 
			            check.prop("checked", to); 
			  
			            if(a.attr("index") == 0) { 
			                if(to) { 
			                    jQuery(".plans").removeClass("no-spirits"); 
			                } 
			                else { 
			                    jQuery(".plans").addClass("no-spirits"); 
			                } 
			            } 
			            updateH3Height(); 
			        }); 
			        jQuery(".calendar-head a.with-dropdown").click(function() { 
			            var a = jQuery(this); 
			            var d = a.closest(".calendar-head"); 
			            var p = jQuery(".popover", d); 
			            p.css({ 
			                left: a.position().left - 60 
			            }).show(); 
			        }); 
			        jQuery(".calendar-head .popover .close-btn, .calendar-head .popover .select-btn").click(function() { 
			            jQuery(".calendar-head .popover").hide(); 
			        }); 
			  
			        jQuery("#period-select").change(function() { 
			            var s = jQuery(this); 
			            var val = +jQuery("option:selected", s).val();
			            if(val === 1) { 
							jQuery("#monthly-view").show();
			                jQuery("#quarterly-view").hide(); 
			                jQuery("#monthly-calendar-head").show();
			            } else {
			                jQuery("#monthly-view").hide();
			                jQuery("#quarterly-view").show(); 
			                jQuery("#monthly-calendar-head").hide();
			            } 
			        }); 
			        jQuery("#header-period-select").change(function() { 
			            var s = jQuery(this); 
			            var val = +jQuery("option:selected", s).val(); 
			            if(val === 1) { 
			            	refreshContent();
			            } 
			            else { 
 							refreshContent();
			            } 
			        }); 
			        jQuery(".desc-block").click(function() { 
			            var link = jQuery(this).data("link"); 
			            window.location.href = link; 
			        }); 
			  
			        var updateH3Height = function() { 
			            jQuery(".plan h3").each(function() { 
			                var h = jQuery(this); 
			                if(h.height() > 60) { 
			                    h.addClass("two-lines"); 
			                } 
			                else if(h.height() < 40) { 
			                    h.removeClass("two-lines"); 
			                } 
			            }); 
			            jQuery(".plan a.p").each(function() { 
			                var h = jQuery(this); 
			                if(h.height() < 30) { 
			                    h.removeClass("two-lines"); 
			                } 
			                else if(h.height() > 40) { 
			                    h.addClass("two-lines"); 
			                } 
			            }) 
			        } 
			        updateH3Height(); 
			        jQuery(window).resize(function() { 
			            updateH3Height(); 
			        }); 
			    }
		    });            
        </script>
        

        <!-- content -->
        <div class="content clearfix">
		<apex:form >
		<apex:actionFunction name="refreshContent" action="{!refreshContent}" rerender="ivap_information" status="ajax-status" /> 
		<apex:actionFunction name="selectSalesDriver" action="{!selectSalesDriver}" rerender="ivap_information" status="ajax-status">
			<apex:param name="salesDriver" assignTo="{!salesDriver}" value="" />
		</apex:actionFunction>
		<apex:actionFunction name="setStartDateValue" action="{!setStartDateValue}" rerender="ivap_information" status="ajax-status">
		<apex:param name="startFromDate" assignTo="{!startFromDate}" value="" />
			</apex:actionFunction>
		<apex:actionFunction name="nextMonth" action="{!nextMonth}" rerender="ivap_information" status="ajax-status"/>
		<apex:actionFunction name="previousMonth" action="{!previousMonth}" rerender="ivap_information" status="ajax-status"/>	
			
        <!-- BREADCRUMB -->
        <apex:outputPanel id="beadcrumblinks">
            <c:R_pageBreadcrumb breadcrumbLinks="{!breadCrumbLinks}" menuLinks="{!menuLinks}"/>
        </apex:outputPanel>

            <h2 class="with-select">
                <span class="title">Innovation, Sustainovation  &amp; VAP</span>
                <select id="period-select">
                    <option>Monthly View</option>
                    <option>Quarterly View</option>
                    <option>6 Month View</option>
                    <option>12 Month View</option>
                </select>
                <div class="include-select jqTransformSelectWrapper" style="z-index: 9; width: 135px;">
                    <div>
                        <span style="width: 115px;">Include</span>
                        <a href="javascript:;" class="jqTransformSelectOpen"></a>
                    </div>
                    <ul style="width: 133px; display: none; visibility: visible; overflow-y: auto;">
                        <li>
                            <a href="#" index="0">
                                <input type="checkbox" class="noTransform"/>
                                Spirits
                            </a>
                        </li>
                        <li>
                            <a href="#" index="3">
                                <input type="checkbox" class="noTransform" disabled="true" checked="true"/>
                                Wine
                            </a>
                        </li>
                    </ul>
                </div>
                <a href="javascript:;" class="btn pdf-btn isv-bg right-btn">
                    <span>Download as PDF</span>
                </a>
            </h2>
 
            <div id="monthly-calendar-head" class="calendar-head">
                <a href="javascript:;" class="prev isv-bg">
                    <span></span>
                </a>
                <a href="javascript:;" class="date with-dropdown">June 2013</a>
                <a href="javascript:;" class="next isv-bg">
                    <span></span>
                </a>
                <div class="popover">
                    <div class="select">
                        <a href="javascript:;" class="">Prev</a>
                        <select>
                            <option>Jan</option>
                            <option>Feb</option>
                            <option>Mar</option>
                            <option>Jun</option>
                            <option>Apr</option>
                            <option>May</option>
                            <option selected="true">Jun</option>
                            <option>Jul</option>
                            <option>Aug</option>
                            <option>Sep</option>
                            <option>Oct</option>
                            <option>Nov</option>
                            <option>Dec</option>
                        </select>
                        <select>
                            <option>2008</option>
                            <option>2009</option>
                            <option>2010</option>
                            <option>2011</option>
                            <option>2012</option>
                            <option selected="true">2013</option>
                            <option>2014</option>
                            <option>2015</option>
                            <option>2016</option>
                            <option>2017</option>
                            <option>2018</option>
                            <option>2019</option>
                            <option>2020</option>
                        </select>
                        <a href="javascript:;" class="">Next</a>                      
                    </div>
                    <div class="buttons">
                        <a href="javascript:;" class="isv-bg ">Today</a>
                        <a href="javascript:;" class="isv-bg close-btn">Close</a>
                        <a href="javascript:;" class="isv-bg select-btn">Select</a>
                    </div>
                </div>
            </div>

            <div class="general-updates">
                <h3>
                    <a href="innovation-click-header.html">General Updates</a>
                </h3>
                <h5>Performance Updates</h5>
                <div class="items">
                    <c:R_NarrowBlogList format="Titles" isLoggedIn="{!isLoggedIn}" url="" singleTag="Location:innovation-vap" id="blogPostComp" />
                </div>
                <h5>Planning Calendars</h5>
                <div class="items">
					<apex:outputPanel rendered="{!OR(ISNULL(planningCalendars),planningCalendars.size=0)}">No items.</apex:outputPanel>
					<apex:outputPanel rendered="{!OR(ISNULL(planningCalendars),planningCalendars.size!=0)}" styleClass="left">                  
						<apex:repeat value="{!planningCalendars}" var="pc">
							<p>
								<apex:image url="{!URLFOR($Resource.CommonPage, 'images/transparent.gif')}" styleClass="file-ico24 ico-{!pc['fileType']}"/>
								<span class="list-description">
									<a href="/sfc/servlet.shepherd/version/download/{!pc['cvid']}">
										{! IF (len(pc['description'])>17, LEFT(pc['description'], 20)+'...', pc['description'])}
									</a>
								</span>
							</p>
						</apex:repeat>
					</apex:outputPanel> 
                </div>
            </div>

            <apex:variable var="lastItem" value=""/>
            <apex:repeat value="{!salesDriversToShow}" var="program"><apex:variable var="lastItem" value="{!program}" /></apex:repeat>
            
            <apex:outputPanel id="ivap_information">

            	<div id="monthly-view">
            	
		            <div class="plans no-spirits">
		            <apex:repeat value="{!months}" var="month">
		                <apex:repeat value="{!salesDriversToShow}" var="program">
		                <div class="plan {!IF(lastItem == program,'last','')}">
		                    <h3 class="isv-bg">
		                        <a href="innovation-click-header.html">{!program}</a>
		                    </h3>
							<apex:repeat value="{!calendarData[month.data][program]}" var="programData">
								<div align="center" style="1px solid #B9B8B8; width: 180px; height: 77px; {!programData.styleBackgroundColor}{!programData.styleTextColor}; cursor: pointer; " onClick="window.location='{!detailPagePath}&id={!programData.id}'">
								<div style="{!programData.styleBackgroundImage} background-repeat: none; {!IF(isCalendarThemeMixed, 'background-size: 116px 36px;', 'background-size: 145px 45px;')} width: 145px; height: 45px;"></div>
								<div style="height: 10px; width: 145px;"></div>
									<a class="p" href="" style="">{!programData.label}</a>
								</div>
								<div style="width: 145px; height: 2px;"></div>
							</apex:repeat>
							<apex:variable var="displayCalendar" value="{!0}"/>
		
		                </div>
		                </apex:repeat>
		            </apex:repeat>
		
		            </div>
        		</div>
                    
	            <div id="quarterly-view" style="display: none;">
					<div class="plans plans-header no-spirits">
						<apex:repeat value="{!salesDriversToShow}" var="program">
						<div class="plan {!IF(lastItem == program,'last','')}">
							<h3 class="two-lines isv-bg">
								<a href="innovation-click-header.html">{!program}</a>
							</h3>
						</div>
						</apex:repeat>
					</div>
	
					<apex:repeat value="{!months}" var="month">
	            		<div class="calendar-head">
			                <a href="javascript:;" class="date">{!month.name}</a>
						</div>
						<div class="plans quaterly-plans no-spirits">
	                    <apex:repeat value="{!salesDriversToShow}" var="program">
	                    	<apex:variable var="itemInList" value="{!1}"/>
	                    	<div class="plan {!IF(lastItem == program,'last','')}" style="width: 183px;">
	                    	<apex:repeat value="{!calendarData[month.data][program]}" var="programData">
	                    		<h3 class="two-lines isv-bg" href="innovation-click-header.html">Integrated National Program</h3>
	<!-- 							<div align="center" style="1px solid #B9B8B8; width: 183px; height: 40px; {!programData.styleBackgroundColor}{!programData.styleTextColor}; cursor: pointer; " onClick="window.location='{!detailPagePath}&id={!programData.id}'">
								<div style="width: 116px; height: 3px;"></div>
								<div style=" width: 136px; height: 10px;"></div>
	-->							
									<a class="p" href="" style="1px solid #B9B8B8; width: 183px; height: 40px; {!programData.styleBackgroundColor}{!programData.styleTextColor}; cursor: pointer; " onClick="window.location='{!detailPagePath}&id={!programData.id}'">{!programData.label}</a>
	<!-- 							</div>
								<div style="width: 136px; height: 5px;"></div>
	-->							
								<apex:variable var="itemInList" value="{!itemInList + 1}"/>
							</apex:repeat>
							</div>
	                    </apex:repeat>
	                    </div>					
					</apex:repeat>
				</div>
            <!-- END OF QUARTERLY VIEW -->
			</apex:outputPanel>

            <div class="clear"></div>
		</apex:form>
        </div>

    </div>
	
	
	<!-- PAGE FOOTER -->
	<c:R_pageFooter isInternal="{!isInternalUser}" />
	<div id="tooltipIpad"></div>
	</div>
</body>

<script type="text/javascript">
	jQuery("#j_id0:j_id34:quarterly_view").html();

</script>
</apex:page>