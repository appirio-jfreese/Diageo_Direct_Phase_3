<apex:page showheader="false" standardStylesheets="false" sidebar="false" title="Diageo" controller="Controller_MonthlyExecutionPlan">
    	
    <div class="content-wrapper">
        <!-- PAGE HEADER -->
        <c:R_PageHeader showThemeSelector="true" isLoggedIn="{!isLoggedIn}" basketItemsNumber="{!basketItemsNo}" />


		<script type="text/javascript">
	    	pageViewed('Monthly Execution Plan');
	    </script>


        <!--  BREADCRUMB -->
        <apex:outputPanel id="beadcrumblinks">
        	<c:R_pageBreadcrumb breadcrumbLinks="{!breadCrumbLinks}" menuLinks="{!menuLinks}"/>
	</apex:outputPanel>

        <!-- PAGE CONTENT -->
        <div class="content bggradient {!if(ISNULL(siteTheme),'hidden','')}">
            <apex:form >
                <apex:actionFunction name="refreshContent" action="{!refreshContent}" rerender="mepData, beadcrumblinks" status="ajax-status"/> 
                <apex:actionFunction name="selectSalesDriver" action="{!selectSalesDriver}" rerender="mepData, beadcrumblinks" status="ajax-status">
                    <apex:param name="salesDriver" assignTo="{!salesDriver}" value="" />
                </apex:actionFunction>
                <apex:actionFunction name="setStartDateValue" action="{!setStartDateValue}" rerender="mepData, beadcrumblinks" status="ajax-status">
                    <apex:param name="startFromDate" assignTo="{!startFromDate}" value="" />
                </apex:actionFunction>
                <apex:actionFunction name="nextMonth" action="{!nextMonth}" rerender="mepData, beadcrumblinks" status="ajax-status"/>
                <apex:actionFunction name="previousMonth" action="{!previousMonth}" rerender="mepData, beadcrumblinks" status="ajax-status"/>
                <apex:pageBlock id="mepData">
                <div class="sub-title-with-menu-wrapper">
                    <div class="mep-title">Monthly Execution Plan</div>
                        <div class="title-import">
                            <apex:outputPanel id="pdfButton">
                                <div class="download-pdf-button float-left">
                                    <div class="download-pdf-button-ico"><apex:image url="{!URLFOR($Resource.CommonPage, 'images/transparent.gif')}" styleClass="file-ico24 ico-PDF"/></div>
                                    <div class="download-pdf-button-description"><a href="{!pdfPath}" target="new">DOWNLOAD AS PDF</a></div>
                                </div>
                            </apex:outputPanel>
                            <div class="clear-float"></div>
                        </div>
                        <div class="title-menu" style="right:225px;">
			            	<c:R_checkboxList width="150" options="{!themeOptions}" noOfOptions="{!noOfThemesAvailable}" onchange="refreshContent()" />
			            </div>
                        <div class="title-menu">
                            <c:R_selectList options="{!timePeriods}"  value="{!timePeriod}" onchange="refreshContent()" />
                        </div>
                </div>        
                    <table class="mep-data">
                        <thead>
                            <tr>
                                <apex:repeat value="{!salesDriversToShow}" var="salesdrivername">
                                    <apex:outputText rendered="{!salesDriversToShowCount==1}">
                                        <th class="mep_program{!salesDriversToShowCount}" ><button class="back" onclick="selectSalesDriver('All');return false;">Back</button><span class="mep-program-name-wrapper" >{!salesdrivername}</span></th>
                                    </apex:outputText>
                                    <apex:outputText rendered="{!salesDriversToShowCount!=1}">
                                        <th class="mep_program{!salesDriversToShowCount}" onclick="selectSalesDriver('{!salesdrivername}')" style="cursor:pointer;"><a href="#">{!salesdrivername}</a> </th>
                                    </apex:outputText>
                                </apex:repeat>
                            </tr>
                        </thead>
                        <tbody>
                            <apex:variable var="displayCalendar" value="{!1}"/>
                            <apex:repeat value="{!months}" var="month"> 
                                <!-- month box -->
                                <tr class="mep-month">
                                    <td colspan="{!salesDriversToShowCount}" class="month">
                                        <img src="{!URLFOR($Resource.CommonPage, 'images/transparent.gif')}" alt="Next Month" class="month-next" style="display:{!month.showArrows};"/><img src="{!URLFOR($Resource.CommonPage, 'images/transparent.gif')}" alt="Previous Month" class="month-previous" style="display:{!month.showArrows};"/><apex:inputText rendered="{!displayCalendar==1}" value="{!startFromDate}" styleClass="jumpToDate" style="opacity:0.0; filter:alpha(opacity=0);"/>{!month.name} <apex:inputText rendered="{!displayCalendar==1}" value="{!startFromDate}" styleClass="jumpToDate"/>
                                    </td>
                                </tr>
                                <tr class="month-data month{!span}">
                                    <apex:repeat value="{!salesDriversToShow}" var="program">
                                        <td>
                                            <apex:repeat value="{!calendarData[month.data][program]}" var="programData">
                                            	<div class="month{!span} mep-general mep_program{!salesDriversToShowCount}" style="width: auto !important; {!programData.styleBackgroundColor}{!programData.styleTextColor}" onclick="window.location='{!detailPagePath}&id={!programData.id}'">
												<a href="#" onclick="pageViewed('Monthly Execution Plan - {!programData.description}');"></a>
												
	                                                <apex:outputText rendered="{!salesDriversToShowCount==1}">
                                                        <div class="month{!span}-sep1-desc">
                                                            <apex:outputtext escape="false" value="{!programData.description}"></apex:outputtext>
                                                        </div>
                                                	</apex:outputText>          
                                                    <div class="month{!span}-sep month{!span}-sep{!salesDriversToShowCount}" style="{!programData.styleBackgroundImage}">
                                                        <div style="{!programData.styleTextColor}">{!programData.label}</div>
                                                    </div>

                                                </div>
                                            </apex:repeat>
                                        </td>
                                    </apex:repeat>
                                </tr>
                                <apex:variable var="displayCalendar" value="{!0}"/>
                            </apex:repeat>
                        </tbody>
                    </table>

                </apex:pageBlock>
            </apex:form>
        </div>
        <!-- PAGE FOOTER -->
        <c:R_pageFooter isInternal="{!isInternalUser}" />
        </div>

</apex:page>